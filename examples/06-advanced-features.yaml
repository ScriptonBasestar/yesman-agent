# Advanced Features Configuration
# Demonstrates advanced features like scripts, complex layouts, and custom settings

session_name: "advanced-development"
description: "Advanced configuration with scripts and complex layouts"

# Session settings for advanced development

# Pre-session setup script  
before_script: |
  echo "üöÄ Starting advanced development environment..."
  
  # Check if dependencies are installed
  if [ -f "package.json" ]; then
    echo "üì¶ Installing dependencies..."
    npm install
  fi
  
  # Start background services if docker-compose exists
  if [ -f "docker-compose.yml" ]; then
    echo "üê≥ Starting services..."
    docker-compose up -d database redis
  fi
  
  # Create necessary directories
  mkdir -p logs temp
  
  echo "‚úÖ Environment ready!"

# Post-session cleanup script
after_script: |
  echo "üßπ Cleaning up..."
  docker-compose down || true
  rm -rf temp/
  echo "‚úÖ Cleanup complete!"

# Environment variables
environment:
  NODE_ENV: "development"
  DEBUG: "app:*"
  API_PORT: "8000"
  DB_HOST: "localhost"
  REDIS_URL: "redis://localhost:6379"

# Workspace configuration for advanced development
workspace_config:
  base_dir: "~/projects/advanced-app"

workspace_definitions:
  app:
    rel_dir: "./src"
    allowed_paths:
      - "."
      - "./components"
      - "./services"
      - "./utils"
      - "./tests"
    description: "Main application code"
    
  config:
    rel_dir: "./config"
    allowed_paths: ["."]
    description: "Configuration files"

# Advanced logging configuration
logging:
  level: "DEBUG"
  file: "~/.scripton/yesman/logs/advanced.log"
  format: "%(asctime)s [%(levelname)s] %(name)s: %(message)s"

# Custom server configuration
server:
  host: "0.0.0.0"  # Allow external connections
  port: 10502      # Custom port

# Custom application-specific settings
custom:
  # Project-specific settings
  project:
    type: "advanced"
    auto_backup: true
    backup_interval: 3600  # 1 hour
    
  # Integration settings
  integrations:
    github: true
    slack: false
    discord: true
    
  # Performance settings
  performance:
    cache_enabled: true
    max_sessions: 10
    session_timeout: 7200  # 2 hours